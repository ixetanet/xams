import imgSecuritySchema from '@/images/xams_security_schema.png'
import imgEditRole from '@/images/edit_role.png'

export const metadata = {
  title: 'Security',
  description: 'Creating a Security service layer',
}

# Security

Security is configured in the Admin Dashboard by using Teams, Roles, and Permissions. {{ className: 'lead' }}

## Schema

The diagram below shows the relationships between the security entities. Users are assigned to Teams, while Roles can be assigned to both Teams and Users. Permissions are assigned to Roles.

<DocImage image={imgSecuritySchema} full={false} />

## Permissions

Permissions for Roles can be configured from the Admin Dashboard under Security -> Roles. Permissions assigned to Users are additive, meaning they accumulate from multiple roles.

<DocImage image={imgEditRole} full={true} />

Create, Read, Update, Delete, and Assign permissions can be set at the `User`, `Team`, or `System` level. Entities that inherit from the `BaseEntity` class will have `OwningUserId` and `OwningTeamId` fields, which determine the record owner.

The `OwningUserId` and `OwningTeamId` fields can be set simultaneously, but at least one must always be specified.

- <b>User-level permissions:</b> Users can only create, read, update, or delete records
  where the `OwningUserId` field is set to their user ID.
- <b>Team-level permissions:</b> Users can create, read, update, or delete records
  where the `OwningUserId` field is set to their user ID or where the `OwningTeamId`
  field is set to a team they belong to.
- <b>System-level permissions:</b> Users can create, read, update, or delete any
  record in the system.

## Assign

- <b>User-level assign permissions:</b> When creating records, users can only assign
  the record to themselves (`OwningUserId`).

- <b>Team-level assign permissions:</b> Users can assign the `OwningUserId` to themselves
  or any user in the teams they belong to. Additionally, they can set the `OwningTeamId`
  to any of the teams they are a member of.

- <b>System-level assign permissions:</b> Users can assign the record to any user
  (`OwningUserId`) or team (`OwningTeamId`) in the system.

## Import & Export

## Custom Permissions

## Checking Permissions
