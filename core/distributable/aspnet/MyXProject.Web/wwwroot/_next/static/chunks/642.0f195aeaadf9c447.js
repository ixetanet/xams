"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{8642:function(e,l,a){a.r(l);var d=a(4246),i=a(5381),u=a(9496),t=a(9228),o=a(7152),n=a(2268),r=a(7378);let s=(0,r.forwardRef)((e,l)=>{let{image:a,label:i,description:o,...n}=e;return(0,d.jsx)("div",{ref:l,...n,children:(0,d.jsx)(u.Z,{noWrap:!0,children:(0,d.jsxs)("div",{children:[(0,d.jsx)(t.x,{size:"sm",children:i}),(0,d.jsx)(t.x,{size:"xs",opacity:.65,children:o})]})})})}),v=(0,r.forwardRef)((e,l)=>{let a=(0,r.useRef)(null),u=(0,i.Z)(),[t,v]=(0,r.useState)(void 0!==e.defaultLabelValue?e.defaultLabelValue:null),[m,f]=(0,r.useState)(void 0!==e.defaultLabelValue?[e.defaultLabelValue]:[]),[b,c]=r.useState(null),[p]=(0,n.c)(b,300,{leading:!0});(0,r.useImperativeHandle)(l,()=>a.current);let F=async()=>{var l,a,d,i,o;let n=["".concat(e.metaDataField.lookupTable,"Id"),e.metaDataField.lookupTableNameField];null!=e.metaDataField.lookupTableDescriptionField&&n.push(e.metaDataField.lookupTableDescriptionField),""!==e.metaDataField.option&&n.push("Value");let r=await u.read({tableName:e.metaDataField.lookupTable,maxResults:20,page:1,fields:n,orderBy:[...""!==e.metaDataField.option?[{field:"Order",order:"asc"}]:[],{field:e.metaDataField.lookupTableNameField,order:null===(l=e.query)||void 0===l?void 0:l.order}],filters:[{field:e.metaDataField.lookupTableNameField,value:null!=t&&t.label===p?"":p},...null!==(o=null===(a=e.query)||void 0===a?void 0:a.filters)&&void 0!==o?o:[],...""!==e.metaDataField.option?[{field:"Name",value:e.metaDataField.option}]:[]],joins:null===(d=e.query)||void 0===d?void 0:d.joins,except:null===(i=e.query)||void 0===i?void 0:i.except,..."OwningUserId"===e.metaDataField.name||"OwningTeamId"===e.metaDataField.name?{parameters:{isOwnerField:!0,tableName:e.owningTableName}}:{}});if(!r||!r.succeeded)return;let s=r.data.results.map(l=>({value:"".concat(l["".concat(e.metaDataField.lookupTable,"Id")]),label:l[e.metaDataField.lookupTableNameField],...null!=e.metaDataField.lookupTableDescriptionField?{description:"".concat(l[e.metaDataField.lookupTableDescriptionField])}:{},...""!==e.metaDataField.option?{data:l.Value}:{}}));void 0!==e.excludeValues&&(s=s.filter(l=>{var a;return(null===(a=e.excludeValues)||void 0===a?void 0:a.find(e=>e===l.value))===void 0})),null!=t&&void 0===s.find(e=>e.value===(null==t?void 0:t.value))&&s.push(t),f(s=s.map(e=>(void 0===e.label&&(e.label=e.value),e)))};for(let l of((0,r.useEffect)(()=>{null===p||["CreatedById","UpdatedById"].includes(e.metaDataField.name)||F()},[p]),(0,r.useEffect)(()=>{void 0!==e.defaultLabelValue&&void 0===m.find(l=>{var a;return l.value===(null===(a=e.defaultLabelValue)||void 0===a?void 0:a.value)})&&f([...m,e.defaultLabelValue])},[e.defaultLabelValue]),m))null==l.label&&(l.label=l.value);return(0,d.jsx)(o.Ph,{label:e.label,data:m,className:e.className,itemComponent:null!=e.metaDataField.lookupTableDescriptionField?s:void 0,defaultValue:void 0!==e.defaultLabelValue?e.defaultLabelValue.value:void 0,value:e.value,onSearchChange:c,onChange:l=>{var a,d,i,u,t;void 0!==e.onChange&&e.onChange({id:l,value:null!==(i=null===(a=m.find(e=>e.value===l))||void 0===a?void 0:a.data)&&void 0!==i?i:null,label:null!==(u=null===(d=m.find(e=>e.value===l))||void 0===d?void 0:d.label)&&void 0!==u?u:null}),v(null!==(t=m.find(e=>e.value===l))&&void 0!==t?t:null)},onBlur:e.onBlur,searchable:!0,clearable:e.metaDataField.isNullable,ref:a,readOnly:e.readOnly,withAsterisk:e.required,error:e.error,disabled:e.disabled})});v.displayName="XLookup",l.default=v}}]);