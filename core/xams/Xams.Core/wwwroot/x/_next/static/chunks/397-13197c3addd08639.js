"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[397],{2397:(e,s,r)=>{r.d(s,{A:()=>I});var i=r(6514),t=r(3142),n=r(5261),l=r(5834),a=r(8108),o=r(6864),d=r(219),c=r(8801),u=r(3576),m=r(8150),h=r(9967),f=r(6444),x=r(5304);let g=()=>{let{auth:e,loadingStates:s,setLoadingStates:r}=(0,a.K)(),t=(0,x.I)({queryKey:["auth-settings"],queryFn:async()=>{let e=await fetch("".concat("").concat(f.i3,"?name=firebase"));return e.ok?e.json():null}});return(0,i.jsxs)(d.B,{gap:"lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(c.h,{order:3,ta:"center",mb:"xs",children:"Verify your email"}),(0,i.jsx)(u.E,{size:"sm",ta:"center",c:"dimmed",children:"We've sent a verification link to your email address. Please check your inbox."})]}),e.error&&(0,i.jsx)(m.F,{color:"red",variant:"light",children:e.error}),(0,i.jsx)("form",{onSubmit:async s=>{s.preventDefault(),r(e=>({...e,resendEmail:!0}));try{t.data?await e.sendEmailVerification({url:t.data.redirectUrl,handleCodeInApp:!1}):await e.sendEmailVerification()}finally{r(e=>({...e,resendEmail:!1}))}},children:(0,i.jsx)(h.$,{type:"submit",size:"md",fullWidth:!0,loading:s.resendEmail,children:"Resend verification email"})}),(0,i.jsx)(h.$,{onClick:()=>e.signOut("login"),variant:"subtle",size:"sm",fullWidth:!0,disabled:s.resendEmail,children:"Return to login"})]})};var p=r(2038),j=r(4180),v=r(792);let w=()=>{let{auth:e,providers:s,loadingStates:r,setLoadingStates:t,getProviderDisplayName:n,getProviderIcon:o,isAnyProviderLoading:f}=(0,a.K)(),x=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=setTimeout(()=>{x.current&&x.current.focus()},100);return()=>clearTimeout(e)},[]),(0,i.jsxs)(d.B,{gap:"lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(c.h,{order:2,ta:"center",mb:"xs",children:"Sign in"}),(0,i.jsx)(u.E,{size:"sm",ta:"center",c:"dimmed",children:"Please sign in to continue."})]}),e.error&&(0,i.jsx)(m.F,{color:"red",variant:"light",children:e.error}),(0,i.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),t(e=>({...e,signIn:!0}));try{await e.signIn()}finally{t(e=>({...e,signIn:!1}))}},children:[(0,i.jsxs)(d.B,{gap:"md",children:[(0,i.jsx)(p.k,{ref:x,label:"Email address",placeholder:"Enter your email",value:e.emailAddress,onChange:s=>e.setEmailAddress(s.currentTarget.value),size:"md",disabled:r.signIn||f()}),(0,i.jsx)(p.k,{label:"Password",placeholder:"Enter your password",type:"password",value:e.password,onChange:s=>e.setPassword(s.currentTarget.value),size:"md",disabled:r.signIn||f()}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)(j.S,{label:"Remember me",checked:e.remember,onChange:s=>{e.setRemember(s.currentTarget.checked)},disabled:r.signIn||f()}),(0,i.jsx)(u.E,{size:"sm",c:"blue",style:{cursor:"pointer"},onClick:()=>e.setView("forgot_password"),children:"Forgot password?"})]})]}),(0,i.jsx)(h.$,{type:"submit",size:"md",mt:"md",fullWidth:!0,loading:r.signIn,children:"Sign in"})]}),s.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.c,{label:"Or continue with",labelPosition:"center"}),(0,i.jsx)(d.B,{gap:"sm",children:s.map(s=>(0,i.jsxs)(h.$,{onClick:async()=>{let r="".concat(s,"SignIn");t(e=>({...e,[r]:!0}));try{await e.signInProvider(s)}finally{t(e=>({...e,[r]:!1}))}},variant:"default",size:"md",fullWidth:!0,disabled:r.signIn||f(),loading:r["".concat(s,"SignIn")]||!1,leftSection:o(s),children:["Continue with ",n(s)]},s))})]}),(0,i.jsxs)(u.E,{size:"sm",ta:"center",children:["Don't have an account?"," ",(0,i.jsx)(u.E,{component:"a",c:"blue",style:{cursor:"pointer"},onClick:()=>e.setView("register"),children:"Sign up"})]})]})},y=()=>{let{auth:e,loadingStates:s}=(0,a.K)();return(0,i.jsxs)(d.B,{gap:"md",children:[(0,i.jsx)(c.h,{order:3,ta:"center",children:"Choose verification method"}),e.mfaFactors.map(r=>"totp"===r?(0,i.jsx)(h.$,{onClick:()=>e.setView("mfa_totp"),variant:"default",size:"md",fullWidth:!0,disabled:s.mfaTotp||s.mfaSms,children:"Authenticator App"},r):"sms"===r?(0,i.jsx)(h.$,{onClick:()=>{e.setView("mfa_sms"),e.mfaSmsSend()},variant:"default",size:"md",fullWidth:!0,disabled:s.mfaTotp||s.mfaSms,children:"SMS"},r):null),(0,i.jsx)(h.$,{onClick:()=>e.signOut("login"),variant:"subtle",size:"sm",mt:"xs",fullWidth:!0,disabled:s.mfaTotp||s.mfaSms,children:"Logout"})]})};var b=r(3605);let E=()=>{let{auth:e,loadingStates:s,setLoadingStates:r}=(0,a.K)(),t=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=setTimeout(()=>{t.current&&t.current.focus()},100);return()=>clearTimeout(e)},[]),(0,i.jsx)("form",{onSubmit:async s=>{s.preventDefault(),r(e=>({...e,mfaSms:!0}));try{await e.mfaSmsVerify()}finally{r(e=>({...e,mfaSms:!1}))}},children:(0,i.jsxs)(d.B,{gap:"lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(c.h,{order:3,ta:"center",mb:"xs",children:"Enter SMS code"}),(0,i.jsx)(u.E,{size:"sm",ta:"center",c:"dimmed",children:"Enter the code sent to your phone"})]}),e.error&&(0,i.jsx)(m.F,{color:"red",variant:"light",children:e.error}),(0,i.jsxs)("div",{children:[(0,i.jsx)(u.E,{size:"sm",fw:500,mb:"xs",children:"SMS Code"}),(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(b.c,{ref:t,length:6,size:"md",value:e.mfaCode,onChange:s=>e.setMfaCode(s),disabled:s.mfaSms,autoFocus:!0})})]}),(0,i.jsx)(h.$,{type:"submit",size:"md",fullWidth:!0,loading:s.mfaSms,children:"Verify"}),(0,i.jsx)(h.$,{onClick:()=>e.signOut("login"),variant:"subtle",size:"sm",mt:"xs",fullWidth:!0,disabled:s.mfaSms,children:"Logout"})]})})},C=()=>{let{auth:e,loadingStates:s,setLoadingStates:r}=(0,a.K)(),t=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=setTimeout(()=>{t.current&&t.current.focus()},100);return()=>clearTimeout(e)},[]),(0,i.jsx)("form",{onSubmit:async s=>{s.preventDefault(),r(e=>({...e,mfaTotp:!0}));try{await e.mfaTotpVerify()}finally{r(e=>({...e,mfaTotp:!1}))}},children:(0,i.jsxs)(d.B,{gap:"lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(c.h,{order:3,ta:"center",mb:"xs",children:"Enter verification code"}),(0,i.jsx)(u.E,{size:"sm",ta:"center",c:"dimmed",children:"Enter the code from your authenticator app"})]}),e.error&&(0,i.jsx)(m.F,{color:"red",variant:"light",children:e.error}),(0,i.jsxs)("div",{children:[(0,i.jsx)(u.E,{size:"sm",fw:500,mb:"xs",children:"Verification Code"}),(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(b.c,{ref:t,length:6,size:"md",value:e.mfaCode,onChange:s=>e.setMfaCode(s),disabled:s.mfaTotp,autoFocus:!0})})]}),(0,i.jsxs)("div",{className:"w-full flex flex-col gap-1",children:[(0,i.jsx)(h.$,{type:"submit",size:"md",fullWidth:!0,loading:s.mfaTotp,children:"Verify"}),(0,i.jsx)(h.$,{onClick:()=>e.signOut("login"),variant:"subtle",size:"sm",mt:"xs",fullWidth:!0,disabled:s.mfaTotp,children:"Logout"})]})]})})},S=()=>{let{auth:e,loadingStates:s,setLoadingStates:r,redirectUrl:t}=(0,a.K)(),n=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=setTimeout(()=>{n.current&&n.current.focus()},100);return()=>clearTimeout(e)},[]),(0,i.jsxs)(d.B,{gap:"lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(c.h,{order:2,ta:"center",mb:"xs",children:"Create account"}),(0,i.jsx)(u.E,{size:"sm",ta:"center",c:"dimmed",children:"Get started by creating your account."})]}),e.error&&(0,i.jsx)(m.F,{color:"red",variant:"light",children:e.error}),(0,i.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),r(e=>({...e,signUp:!0}));try{await e.signUp()&&await e.sendEmailVerification({url:t,handleCodeInApp:!1})}finally{r(e=>({...e,signUp:!1}))}},children:[(0,i.jsxs)(d.B,{gap:"md",children:[(0,i.jsx)(p.k,{ref:n,label:"Email address",placeholder:"Enter your email",value:e.emailAddress,onChange:s=>e.setEmailAddress(s.currentTarget.value),size:"md",disabled:s.signUp}),(0,i.jsx)(p.k,{label:"Password",placeholder:"Create a password",type:"password",value:e.password,onChange:s=>e.setPassword(s.currentTarget.value),size:"md",disabled:s.signUp})]}),(0,i.jsx)(h.$,{type:"submit",size:"md",mt:"md",fullWidth:!0,loading:s.signUp,children:"Create account"})]}),(0,i.jsxs)(u.E,{size:"sm",ta:"center",children:["Already have an account?"," ",(0,i.jsx)(u.E,{component:"a",c:"blue",style:{cursor:"pointer"},onClick:()=>e.setView("login"),children:"Sign in"})]})]})},z=()=>{let{auth:e,loadingStates:s,setLoadingStates:r}=(0,a.K)(),t=(0,l.useRef)(null),[n,o]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=setTimeout(()=>{t.current&&t.current.focus()},100);return()=>clearTimeout(e)},[]),(0,i.jsxs)(d.B,{gap:"lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(c.h,{order:2,ta:"center",mb:"xs",children:"Reset password"}),(0,i.jsx)(u.E,{size:"sm",ta:"center",c:"dimmed",children:n?"Check your email for a password reset link.":"Enter your email address and we'll send you a link to reset your password."})]}),e.error&&(0,i.jsx)(m.F,{color:"red",variant:"light",children:e.error}),n&&(0,i.jsx)(m.F,{color:"green",variant:"light",children:"Password reset email sent! Check your inbox and spam folder."}),!n&&(0,i.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),r(e=>({...e,forgotPassword:!0}));try{await e.sendPasswordResetEmail()&&o(!0)}finally{r(e=>({...e,forgotPassword:!1}))}},children:[(0,i.jsx)(d.B,{gap:"md",children:(0,i.jsx)(p.k,{ref:t,label:"Email address",placeholder:"Enter your email",value:e.resetEmail,onChange:s=>e.setResetEmail(s.currentTarget.value),size:"md",disabled:s.forgotPassword,required:!0})}),(0,i.jsx)(h.$,{type:"submit",size:"md",mt:"md",fullWidth:!0,loading:s.forgotPassword,children:"Send reset link"})]}),(0,i.jsxs)(u.E,{size:"sm",ta:"center",children:["Remember your password?"," ",(0,i.jsx)(u.E,{component:"a",c:"blue",style:{cursor:"pointer"},onClick:()=>{o(!1),e.setView("login")},children:"Back to sign in"})]})]})};var k=r(5568),T=r(2224),A=r(2651),F=r(4102);let V=e=>{let{isOpen:s,type:r,onClose:t,loadingStates:n,setLoadingStates:l}=e,{auth:o}=(0,a.K)(),c=async()=>{if("totp"===r){l(e=>({...e,totpUnenroll:!0}));try{await o.mfaTotpUnenroll()&&t()}finally{l(e=>({...e,totpUnenroll:!1}))}}else if("sms"===r){l(e=>({...e,smsUnenroll:!0}));try{await o.mfaSmsUnenroll()&&t()}finally{l(e=>({...e,smsUnenroll:!1}))}}},f="totp"===r?n.totpUnenroll:n.smsUnenroll;return(0,i.jsx)(A.a,{opened:s,onClose:t,title:"totp"===r?"Deactivate Authenticator App":"sms"===r?"Deactivate SMS Authentication":"Deactivate MFA",centered:!0,size:"md",children:(0,i.jsxs)(d.B,{gap:"lg",children:[(0,i.jsx)(m.F,{color:"orange",variant:"light",children:(0,i.jsx)(u.E,{size:"sm",children:"totp"===r?"Are you sure you want to deactivate the Authenticator App? This will reduce your account security.":"sms"===r?"Are you sure you want to deactivate SMS Authentication? This will reduce your account security.":"Are you sure you want to deactivate this MFA method?"})}),(0,i.jsx)(u.E,{size:"sm",c:"dimmed",children:"You can always re-enable this authentication method later from your profile settings."}),(0,i.jsxs)(F.Y,{justify:"flex-end",gap:"sm",children:[(0,i.jsx)(h.$,{variant:"outline",onClick:t,disabled:f,children:"Cancel"}),(0,i.jsx)(h.$,{color:"red",onClick:c,loading:f,children:"Deactivate"})]})]})})};var P=r(6209);let R=e=>{let{isOpen:s,onClose:r,loadingStates:t,setLoadingStates:n}=e,{auth:o}=(0,a.K)(),[c,f]=(0,l.useState)(""),[x,g]=(0,l.useState)(""),[p,j]=(0,l.useState)(""),[v,w]=(0,l.useState)(null),[y,b]=(0,l.useState)(!1),E=()=>{setTimeout(()=>{f(""),g(""),j(""),w(null),b(!1)},500),r()},C=async e=>{if(e&&e.preventDefault(),c?x?x.length<6?(w("New password must be at least 6 characters"),!1):x!==p?(w("New passwords do not match"),!1):c===x?(w("New password must be different from current password"),!1):(w(null),!0):(w("New password is required"),!1):(w("Current password is required"),!1)){n(e=>({...e,changePassword:!0}));try{await o.changePassword(c,x)&&(b(!0),f(""),g(""),j(""),setTimeout(()=>{E()},2e3))}finally{n(e=>({...e,changePassword:!1}))}}};return(0,i.jsx)(A.a,{opened:s,onClose:E,title:"Change Password",centered:!0,size:"md",children:(0,i.jsx)("form",{onSubmit:C,children:(0,i.jsxs)(d.B,{gap:"lg",children:[y&&(0,i.jsx)(m.F,{color:"green",variant:"light",children:(0,i.jsx)(u.E,{size:"sm",children:"Password changed successfully!"})}),!y&&(0,i.jsxs)(i.Fragment,{children:[v&&(0,i.jsx)(m.F,{color:"red",variant:"light",children:(0,i.jsx)(u.E,{size:"sm",children:v})}),o.error&&(0,i.jsx)(m.F,{color:"red",variant:"light",children:(0,i.jsx)(u.E,{size:"sm",children:o.error})}),(0,i.jsx)(P.y,{label:"Current Password",placeholder:"Enter your current password",value:c,onChange:e=>f(e.currentTarget.value),required:!0,disabled:t.changePassword,"data-autofocus":!0}),(0,i.jsx)(P.y,{label:"New Password",placeholder:"Enter your new password",value:x,onChange:e=>g(e.currentTarget.value),required:!0,disabled:t.changePassword}),(0,i.jsx)(P.y,{label:"Confirm New Password",placeholder:"Confirm your new password",value:p,onChange:e=>j(e.currentTarget.value),required:!0,disabled:t.changePassword}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,i.jsx)(h.$,{type:"button",variant:"outline",onClick:E,disabled:t.changePassword,fullWidth:!0,children:"Cancel"}),(0,i.jsx)(h.$,{type:"submit",loading:t.changePassword,fullWidth:!0,children:"Change Password"})]})]})]})})})},$=()=>{let{auth:e,router:s,loadingStates:r,setLoadingStates:t,deactivateModal:n,setDeactivateModal:o,smsEnrollmentEnabled:f}=(0,a.K)(),[x,g]=(0,l.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.B,{gap:"lg",children:[(0,i.jsx)(h.$,{variant:"subtle",onClick:()=>s.back(),size:"sm",style:{alignSelf:"flex-start"},children:"← Back"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.h,{order:2,ta:"center",mb:"xs",children:"Profile Settings"}),(0,i.jsx)(u.E,{size:"sm",ta:"center",c:"dimmed",children:"Manage your account security settings"})]}),(0,i.jsx)(v.c,{}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.h,{order:4,mb:"md",children:"Multi-Factor Authentication"}),e.isReLoginRequired&&(0,i.jsx)(m.F,{color:"blue",variant:"light",mb:"md",children:(0,i.jsxs)(u.E,{size:"sm",children:[(0,i.jsx)("strong",{children:"Re-authentication Required:"})," For security reasons, you need to sign in again before deactivating MFA. Please log in with your current credentials."]})}),(0,i.jsxs)(d.B,{gap:"md",children:[(0,i.jsxs)(k.Z,{withBorder:!0,p:"md",style:{position:"relative"},children:[e.mfaTotpEnrolled&&(0,i.jsx)(T.E,{color:"green",variant:"light",style:{position:"absolute",top:"12px",right:"12px"},children:"Enabled"}),(0,i.jsxs)(d.B,{gap:"md",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u.E,{fw:500,children:"Authenticator App"}),(0,i.jsx)(u.E,{size:"sm",c:"dimmed",children:"Use an authenticator app for secure login"})]}),e.mfaTotpEnrolled?(0,i.jsx)(h.$,{fullWidth:!0,variant:"outline",color:"red",onClick:()=>{o({isOpen:!0,type:"totp"})},loading:r.totpUnenroll,children:"Deactivate Authenticator App"}):(0,i.jsx)(h.$,{fullWidth:!0,onClick:async()=>{t(e=>({...e,totpCreate:!0}));try{e.setView("setup_mfa_totp"),await e.mfaTotpCreate()}finally{t(e=>({...e,totpCreate:!1}))}},loading:r.totpCreate,children:"Setup Authenticator App"})]})]}),f&&(0,i.jsxs)(k.Z,{withBorder:!0,p:"md",style:{position:"relative"},children:[e.mfaSmsEnrolled&&(0,i.jsx)(T.E,{color:"green",variant:"light",style:{position:"absolute",top:"12px",right:"12px"},children:"Enabled"}),(0,i.jsxs)(d.B,{gap:"md",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u.E,{fw:500,children:"SMS Authentication"}),(0,i.jsx)(u.E,{size:"sm",c:"dimmed",children:"Receive verification codes via SMS"})]}),e.mfaSmsEnrolled?(0,i.jsx)(h.$,{fullWidth:!0,variant:"outline",color:"red",onClick:()=>{o({isOpen:!0,type:"sms"})},loading:r.smsUnenroll,children:"Deactivate SMS Authentication"}):(0,i.jsx)(h.$,{fullWidth:!0,onClick:()=>e.setView("setup_mfa_sms"),children:"Setup SMS Authentication"})]})]})]}),!e.mfaTotpEnrolled&&!e.mfaSmsEnrolled&&(0,i.jsx)(m.F,{color:"orange",variant:"light",mt:"md",children:(0,i.jsxs)(u.E,{size:"sm",children:[(0,i.jsx)("strong",{children:"Security Recommendation:"})," Enable MFA to secure your account."]})})]}),(0,i.jsx)(v.c,{}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.h,{order:4,mb:"md",children:"Password"}),(0,i.jsx)(k.Z,{withBorder:!0,p:"md",children:(0,i.jsxs)(d.B,{gap:"md",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u.E,{fw:500,children:"Change Password"}),(0,i.jsx)(u.E,{size:"sm",c:"dimmed",children:"Update your account password"})]}),(0,i.jsx)(h.$,{fullWidth:!0,onClick:()=>g(!0),children:"Change Password"})]})})]}),(0,i.jsx)(v.c,{}),(0,i.jsx)(h.$,{variant:"outline",onClick:()=>e.signOut("login"),size:"md",fullWidth:!0,children:"Sign Out"})]}),(0,i.jsx)(V,{isOpen:n.isOpen,type:n.type,onClose:()=>o({isOpen:!1,type:null}),loadingStates:r,setLoadingStates:t}),(0,i.jsx)(R,{isOpen:x,onClose:()=>g(!1),loadingStates:r,setLoadingStates:t})]})},B=()=>{let{auth:e,loadingStates:s,setLoadingStates:r}=(0,a.K)(),t=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=setTimeout(()=>{t.current&&t.current.focus()},100);return()=>clearTimeout(e)},[]),(0,i.jsxs)(d.B,{gap:"lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(c.h,{order:3,ta:"center",mb:"xs",children:"Setup SMS MFA"}),(0,i.jsx)(u.E,{size:"sm",ta:"center",c:"dimmed",children:"Enter your phone number to receive verification codes"})]}),e.error&&(0,i.jsx)(m.F,{color:"red",variant:"light",children:e.error}),(0,i.jsx)("form",{onSubmit:async s=>{s.preventDefault(),r(e=>({...e,smsCreate:!0}));try{await e.mfaSmsCreate()&&e.setView("setup_mfa_sms_enroll")}finally{r(e=>({...e,smsCreate:!1}))}},children:(0,i.jsxs)(d.B,{gap:"lg",children:[(0,i.jsx)(p.k,{ref:t,label:"Phone Number",placeholder:"+1234567890",value:e.phoneNumber,onChange:s=>e.setPhoneNumber(s.currentTarget.value),size:"md",disabled:s.smsCreate}),(0,i.jsxs)(F.Y,{grow:!0,children:[(0,i.jsx)(h.$,{type:"submit",size:"md",loading:s.smsCreate,children:"Send Code"}),(0,i.jsx)(h.$,{type:"button",variant:"outline",onClick:()=>e.setView("profile"),size:"md",children:"Cancel"})]})]})})]})};var _=r(3608);let M=()=>{let{auth:e,loadingStates:s,setLoadingStates:r}=(0,a.K)(),t=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=setTimeout(()=>{t.current&&t.current.focus()},100);return()=>clearTimeout(e)},[]),(0,i.jsxs)(d.B,{gap:"lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(c.h,{order:3,ta:"center",mb:"xs",children:"Setup Authenticator App"}),(0,i.jsx)(u.E,{size:"sm",ta:"center",c:"dimmed",children:"Scan the QR code with your authenticator app"})]}),e.error&&(0,i.jsx)(m.F,{color:"red",variant:"light",children:e.error}),s.totpCreate&&(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(n.a,{size:"sm"})}),e.mfaTotpQrCode&&(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(_.Ay,{size:256,style:{height:"auto",maxWidth:"100%",width:"100%"},value:e.mfaTotpQrCode,viewBox:"0 0 256 256"})}),(0,i.jsx)("form",{onSubmit:async s=>{s.preventDefault(),r(e=>({...e,totpEnroll:!0}));try{await e.mfaTotpEnroll(),e.setView("profile")}finally{r(e=>({...e,totpEnroll:!1}))}},children:(0,i.jsxs)(d.B,{gap:"lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u.E,{size:"sm",fw:500,mb:"xs",children:"Verification Code"}),(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(b.c,{ref:t,length:6,size:"md",value:e.mfaCode,onChange:s=>e.setMfaCode(s),disabled:s.totpEnroll,autoFocus:!0})})]}),(0,i.jsxs)(F.Y,{grow:!0,children:[(0,i.jsx)(h.$,{type:"submit",size:"md",loading:s.totpEnroll,children:"Enroll"}),(0,i.jsx)(h.$,{type:"button",variant:"outline",onClick:()=>e.setView("profile"),size:"md",children:"Cancel"})]})]})})]})},W=()=>{let{auth:e,loadingStates:s,setLoadingStates:r}=(0,a.K)(),t=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=setTimeout(()=>{t.current&&t.current.focus()},100);return()=>clearTimeout(e)},[]),(0,i.jsxs)(d.B,{gap:"lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(c.h,{order:3,ta:"center",mb:"xs",children:"Verify SMS Code"}),(0,i.jsx)(u.E,{size:"sm",ta:"center",c:"dimmed",children:"Enter the verification code sent to your phone"})]}),e.error&&(0,i.jsx)(m.F,{color:"red",variant:"light",children:e.error}),(0,i.jsx)("form",{onSubmit:async s=>{s.preventDefault(),r(e=>({...e,smsEnroll:!0}));try{await e.mfaSmsEnroll(),e.setView("profile")}finally{r(e=>({...e,smsEnroll:!1}))}},children:(0,i.jsxs)(d.B,{gap:"lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u.E,{size:"sm",fw:500,mb:"xs",children:"Verification Code"}),(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(b.c,{ref:t,length:6,size:"md",value:e.mfaCode,onChange:s=>e.setMfaCode(s),disabled:s.smsEnroll,autoFocus:!0})})]}),(0,i.jsxs)(F.Y,{grow:!0,children:[(0,i.jsx)(h.$,{type:"submit",size:"md",loading:s.smsEnroll,children:"Enroll"}),(0,i.jsx)(h.$,{type:"button",variant:"outline",onClick:()=>e.mfaSmsCreate(),size:"md",children:"Resend Code"})]}),(0,i.jsx)(h.$,{type:"button",variant:"subtle",onClick:()=>e.setView("profile"),size:"sm",fullWidth:!0,children:"Cancel"})]})})]})},I=e=>{var s;let r=(0,t.A)();return((0,l.useEffect)(()=>{r.isLoggedIn&&r.isEmailVerified&&!r.isMfaRequired&&(e.onLoginSuccess?e.onLoginSuccess():r.setView(e.defaultView))},[r.isLoggedIn,r.isEmailVerified,r.isMfaRequired]),r.isReady)?(r.isLoggedIn||"profile"!==r.view||r.setView("login"),!r.isReLoginRequired&&r.isLoggedIn&&"login"===r.view&&r.view!==e.defaultView&&r.setView(e.defaultView),1===r.mfaFactors.length&&r.isMfaRequired&&("totp"===r.mfaFactors[0]&&"mfa_totp"!==r.view&&r.setView("mfa_totp"),"sms"===r.mfaFactors[0]&&"mfa_sms"!==r.view&&(r.setView("mfa_sms"),r.mfaSmsSend())),(0,i.jsx)(a.h,{providers:e.providers,auth:r,smsEnrollmentEnabled:null!=(s=e.smsEnrollmentEnabled)&&s,redirectUrl:e.redirectUrl,children:(0,i.jsxs)(o.A,{maxWidth:"profile"===r.view?"md":"sm",children:[r.isMfaRequired&&(0,i.jsxs)(i.Fragment,{children:["mfa_totp"!==r.view&&"mfa_sms"!==r.view&&(0,i.jsx)(y,{}),"mfa_totp"===r.view&&(0,i.jsx)(C,{}),"mfa_sms"===r.view&&(0,i.jsx)(E,{})]}),(!r.isLoggedIn||r.isReLoginRequired)&&!r.isMfaRequired&&(0,i.jsxs)(i.Fragment,{children:["login"===r.view&&(0,i.jsx)(w,{}),"register"===r.view&&(0,i.jsx)(S,{}),"forgot_password"===r.view&&(0,i.jsx)(z,{})]}),r.isLoggedIn&&!r.isEmailVerified&&(0,i.jsx)(g,{}),r.isLoggedIn&&r.isEmailVerified&&(0,i.jsxs)(i.Fragment,{children:["setup_mfa_totp"===r.view&&(0,i.jsx)(M,{}),"setup_mfa_sms"===r.view&&(0,i.jsx)(B,{}),"setup_mfa_sms_enroll"===r.view&&(0,i.jsx)(W,{}),"profile"===r.view&&(0,i.jsx)($,{})]})]})})):(0,i.jsx)("div",{className:"min-h-screen flex justify-center items-center",children:(0,i.jsx)(n.a,{size:"md"})})}}}]);